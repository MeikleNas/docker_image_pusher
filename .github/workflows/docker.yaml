name: 清理磁盘空间
on:
  workflow_dispatch:
jobs:
  clean-disk:
    runs-on: ubuntu-latest
    steps:
      - name: 一键清理磁盘空间
        run: |
          # 清理系统日志
          sudo journalctl --vacuum-size=100M
          sudo rm -rf /var/log/*.gz
          sudo truncate -s 0 /var/log/syslog /var/log/auth.log 2>/dev/null
          # 清理Runner缓存
          sudo rm -rf /home/runner/actions-runner/_work/_temp/* 2>/dev/null
          sudo rm -rf /home/runner/actions-runner/_work/_artifact/* 2>/dev/null
          sudo rm -rf /home/runner/.cache/* 2>/dev/null
          # 清理临时文件
          sudo rm -rf /tmp/* 2>/dev/null
          sudo rm -rf /var/tmp/* 2>/dev/null
          # 清理Docker无用资源
          sudo docker system prune -af
          # 查看清理结果
          df -h /
